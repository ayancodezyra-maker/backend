{
	"info": {
		"name": "Bidroom Auth - All 10 Roles",
		"description": "Complete authentication testing for all 10 roles",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5000/api/auth",
			"type": "string"
		},
		{
			"key": "pm_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "super_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin_token",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "APP USER ROLES",
			"item": [
				{
					"name": "PM Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.responseCode.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.success && jsonData.data.token) {",
									"        pm.collectionVariables.set(\"pm_token\", jsonData.data.token);",
									"        pm.test(\"PM Login Success\", function () {",
									"            pm.expect(jsonData.data.user.role_code).to.eql(\"PM\");",
									"            pm.expect(jsonData.data.user.user_type).to.eql(\"APP_USER\");",
									"        });",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"pm@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "GC Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"gc@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "SUB Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"sub@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "TS Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"ts@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "VIEWER Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"viewer@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				}
			]
		},
		{
			"name": "ADMIN PANEL ROLES",
			"item": [
				{
					"name": "SUPER Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.responseCode.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.success && jsonData.data.token) {",
									"        pm.collectionVariables.set(\"super_token\", jsonData.data.token);",
									"        pm.test(\"SUPER Login Success\", function () {",
									"            pm.expect(jsonData.data.user.role_code).to.eql(\"SUPER\");",
									"            pm.expect(jsonData.data.user.user_type).to.eql(\"ADMIN_USER\");",
									"        });",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"super@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "ADMIN Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.responseCode.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (jsonData.success && jsonData.data.token) {",
									"        pm.collectionVariables.set(\"admin_token\", jsonData.data.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "FIN Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"finance@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "MOD Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"moderator@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "SUPPORT Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"support@test.com\",\n  \"password\": \"Test1234!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				}
			]
		},
		{
			"name": "Profile APIs",
			"item": [
				{
					"name": "Get My Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{pm_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/me",
							"host": ["{{base_url}}"],
							"path": ["me"]
						}
					}
				},
				{
					"name": "Update Profile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{pm_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"full_name\": \"Updated Name\",\n  \"phone\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/update-profile",
							"host": ["{{base_url}}"],
							"path": ["update-profile"]
						}
					}
				}
			]
		},
		{
			"name": "Admin APIs",
			"item": [
				{
					"name": "Admin Create User (SUPER)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{super_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"newuser@test.com\",\n  \"password\": \"Test1234!\",\n  \"full_name\": \"New User\",\n  \"role_code\": \"VIEWER\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/create-user",
							"host": ["{{base_url}}"],
							"path": ["admin", "create-user"]
						}
					}
				},
				{
					"name": "Admin Create User (ADMIN)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"newuser2@test.com\",\n  \"password\": \"Test1234!\",\n  \"full_name\": \"New User 2\",\n  \"role_code\": \"GC\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin/create-user",
							"host": ["{{base_url}}"],
							"path": ["admin", "create-user"]
						}
					}
				}
			]
		}
	]
}

